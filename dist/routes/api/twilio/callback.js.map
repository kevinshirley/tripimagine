{"version":3,"sources":["../../../../routes/api/twilio/callback.js"],"names":["express","require","router","Router","Twilio","accountSid","authToken","TwilioClient","use","req","res","next","append","post","calls","create","url","to","from","then","call","process","stdout","write","sid","module","exports"],"mappings":"AAAA,MAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,MAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,MAAMC,SAASH,QAAQ,QAAR,CAAf;AACA,MAAMI,aAAa,oCAAnB;AACA,MAAMC,YAAY,kCAAlB;AACA,MAAMC,eAAeH,OAAOC,UAAP,EAAmBC,SAAnB,CAArB;;AAEA;AACAJ,OAAOM,GAAP,CAAW,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC9BD,MAAIE,MAAJ,CAAW,6BAAX,EAA0C,CAAC,GAAD,CAA1C;AACAF,MAAIE,MAAJ,CAAW,8BAAX,EAA2C,CAAC,6BAAD,CAA3C;AACAF,MAAIE,MAAJ,CAAW,8BAAX,EAA2C,CAAC,cAAD,EAAiB,eAAjB,CAA3C;AACAF,MAAIE,MAAJ,CAAW,wBAAX,EAAqC,KAArC;AACAD;AACA,CAND;;AAQA;;;;;;AAMAT,OAAOW,IAAP,CAAY,mBAAZ,EAAiC,CAACJ,GAAD,EAAMC,GAAN,KAAc;AAC7CH,eAAaO,KAAb,CACGC,MADH,CACU;AACNC,SAAK,oDADC;AAENC,QAAI,cAFE;AAGNC,UAAM;AAHA,GADV,EAMGC,IANH,CAMQC,QAAQC,QAAQC,MAAR,CAAeC,KAAf,CAAqBH,KAAKI,GAA1B,CANhB;AAOD,CARD;;AAUA;;;;;;AAMAtB,OAAOW,IAAP,CAAY,mBAAZ,EAAiC,CAACJ,GAAD,EAAMC,GAAN,KAAc;AAC7CH,eAAaO,KAAb,CACGC,MADH,CACU;AACNC,SAAK,oDADC;AAENC,QAAI,cAFE;AAGNC,UAAM;AAHA,GADV,EAMGC,IANH,CAMQC,QAAQC,QAAQC,MAAR,CAAeC,KAAf,CAAqBH,KAAKI,GAA1B,CANhB;AAOD,CARD;;AAUAC,OAAOC,OAAP,GAAiBxB,MAAjB","file":"callback.js","sourcesContent":["const express = require('express');\nconst router = express.Router();\nconst Twilio = require('twilio');\nconst accountSid = 'AC799e4303fa6ee49d7aab9a6225bb7e39';\nconst authToken = '457bb86642031e4a73d9536652e5f345';\nconst TwilioClient = Twilio(accountSid, authToken);\n\n/** response headers */\nrouter.use((req, res, next) => {\n\tres.append('Access-Control-Allow-Origin', ['*']);\n\tres.append('Access-Control-Allow-Methods', ['GET,PUT,POST,DELETE,OPTIONS']);\n\tres.append('Access-Control-Allow-Headers', ['Content-Type', 'Authorization']);\n\tres.append('Access-Control-Max-Age', 86400);\n\tnext();\n});\n\n/**\n  * Make outgoing calls to travel planning service\n  * @route /callback/outgoing/service\n  * @param void\n  * @return void\n  */\nrouter.post('/outgoing/service', (req, res) => {\n  TwilioClient.calls\n    .create({\n      url: 'http://media.tripimagine.com/sounds/phone-dial.wav',\n      to: '+15149221846',\n      from: '+18006150592',\n    })\n    .then(call => process.stdout.write(call.sid));\n});\n\n/**\n  * Make outgoing calls to support\n  * @route /callback/outgoing/support\n  * @param void\n  * @return void\n  */\nrouter.post('/outgoing/support', (req, res) => {\n  TwilioClient.calls\n    .create({\n      url: 'http://media.tripimagine.com/sounds/phone-dial.wav',\n      to: '+15144334978',\n      from: '+18006150592',\n    })\n    .then(call => process.stdout.write(call.sid));\n});\n\nmodule.exports = router;"]}